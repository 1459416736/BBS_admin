webpackJsonp([0],{"/+7O":function(e,t){},"9UKv":function(e,t){},WDOa:function(e,t){},ZaVq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"PageFilter",props:{listTypeInfo:{type:Array},filterList:{type:Array},query:{type:Object}},data:function(){return{datePickerOptions:{disabledDate:function(e){return e.getTime()>+new Date+6e5}}}},methods:{getPlaceholder:function(e){return"input"===e.type||"textarea"===e.type?"请输入"+e.key:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.key:e.key},handleEvent:function(e){this.$emit("handleEvent",e)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-filter"},e._l(e.filterList,function(t,a){return n("div",{key:a,staticClass:"filter-item"},["button"!==t.type?n("label",{staticClass:"filter-label"},[e._v(e._s(t.key))]):e._e(),e._v(" "),"input"===t.type?n("el-input",{class:"filter-"+t.type,attrs:{type:t.type,disabled:t.disabled,placeholder:e.getPlaceholder(t)},on:{focus:function(n){return e.handleEvent(t.event)}},model:{value:e.query[t.value],callback:function(n){e.$set(e.query,t.value,n)},expression:"query[item.value]"}}):e._e(),e._v(" "),"select"===t.type?n("el-select",{class:"filter-"+t.type,attrs:{disabled:t.disabled,clearable:t.clearable,filterable:t.filterable,placeholder:e.getPlaceholder(t)},on:{change:function(n){return e.handleEvent(t.even)}},model:{value:e.query[t.value],callback:function(n){e.$set(e.query,t.value,n)},expression:"query[item.value]"}},e._l(e.listTypeInfo[t.list],function(e,t){return n("el-option",{key:t,attrs:{label:e.key,value:e.value}})}),1):e._e(),e._v(" "),"time"===t.type?n("el-time-select",{class:"filter-"+t.type,attrs:{"picker-options":t.TimePickerOptions,clearable:t.clearable,disabled:t.disabled,placeholder:e.getPlaceholder(t)},model:{value:e.query[t.value],callback:function(n){e.$set(e.query,t.value,n)},expression:"query[item.value]"}}):e._e(),e._v(" "),"date"===t.type?n("el-date-picker",{class:"filter-"+t.type,attrs:{"picker-options":t.datePickerOptions||e.datePickerOptions,type:t.dateType,clearable:t.clearable,disabled:t.disabled,placeholder:e.getPlaceholder(t)},on:{focus:function(n){return e.handleEvent(t.event)}},model:{value:e.query[t.value],callback:function(n){e.$set(e.query,t.value,n)},expression:"query[item.value]"}}):"button"===t.type?n("el-button",{class:"filter-"+t.type,attrs:{type:t.btType,icon:t.icon},on:{click:function(n){return e.handleEvent(t.event)}}},[e._v(e._s(t.key))]):e._e()],1)}),0)},staticRenderFns:[]};var l=n("C7Lr")(a,i,!1,function(e){n("/+7O")},"data-v-32d4100c",null).exports,r={name:"PageTable",props:{index:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},fieldList:{type:Array,default:function(){return[]}},handle:{type:Array,default:function(){return[]}},pager:{type:Boolean,default:!0},listInfo:{type:Object,default:function(){return{query:{}}}}},mounted:function(){var e=this;this.listInfo.tableHeight=this.getTableHeight(),window.addEventListener("resize",function(){e.listInfo.tableHeight=e.getTableHeight()})},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},getTableHeight:function(){if(0!==document.getElementsByClassName("el-table").length){var e=document.body.clientHeight,t=document.getElementsByClassName("navbar-container")[0].clientHeight,n=document.getElementsByClassName("tags-view-container")[0].clientHeight,a=document.getElementsByClassName("page-filter")[0].clientHeight,i=document.getElementsByClassName("pagination-container")[0]||{clientHeight:0},l=i.clientHeight?i.clientHeight+15:i.clientHeight-35,r=(document.getElementsByClassName("el-table")[0]||{offsetTop:0}).offsetTop;return document.getElementsByClassName("el-table")[0].style.height=e-r-t-n-a-l+"px",console.log("表格最大高度为:"+(e-t-n-a-l)),e-t-n-a-l}}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listInfo.loading,expression:"listInfo.loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"max-height":e.listInfo.tableHeight||void 0,data:e.listInfo.data,border:""}},[e.index?n("el-table-column",{attrs:{align:"center",label:"序号",width:0===e.fieldList.length?"":80,fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+1+(e.listInfo.query.curPage-1)*e.listInfo.query.pageSize))])]}}],null,!1,1905113151)}):e._e(),e._v(" "),e._l(e.fieldList,function(t,a){return n("el-table-column",{key:a,attrs:{prop:t.value,label:t.key,fixed:t.fixed,align:"center",width:t.width,"min-width":t.minwidth||"100px"}},[t.children?e._l(t.children,function(e,a){return n("el-table-column",{key:a,attrs:{prop:e.value,label:e.key,align:"center",width:t.width,"min-width":t.minwidth||"85px"}})}):e._e()],2)})],2),e._v(" "),[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.listInfo.loading,expression:"!listInfo.loading"}],staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":e.listInfo.query.curPage,"page-sizes":e.listInfo.pageSizes,"page-size":e.listInfo.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.listInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.listInfo.query,"curPage",t)},"update:current-page":function(t){return e.$set(e.listInfo.query,"curPage",t)}}})],1)]],2)},staticRenderFns:[]};var o=n("C7Lr")(r,s,!1,function(e){n("WDOa")},"data-v-36a9707c",null).exports,u={render:function(){var e=this.$createElement;return(this._self._c||e)("el-form",{ref:"form",staticClass:"page-form",attrs:{"label-width":"80px"}})},staticRenderFns:[]};var c=n("C7Lr")({name:"PageForm",props:{},data:function(){return{}}},u,!1,function(e){n("9UKv")},"data-v-7d4d1806",null).exports,d=n("rVsN"),f=n.n(d),p={mixins:[{data:function(){return{listInfo:{tableHeight:0,data:[],total:0,loading:!1,pageSizes:[5,10,20,50,100],query:{curPage:1,pageSize:10}}}},methods:{getList:function(e){var t=this;return this.listInfo.loading=!0,new f.a(function(n,a){e(t.listInfo.query).then(function(e){t.listInfo.loading=!1,e.success?(t.listInfo.data=e.content.data,t.listInfo.total=e.content.total,t.listInfo.query.curPage=e.content.curPage,t.listInfo.query.pageSize=e.content.pageSize,n(e)):(t.$message({showClose:!0,message:e.message,type:"error",duration:3500}),a())}).catch(function(){a(),t.listInfo.loading=!1})})},handleCurrentChange:function(e){this.listInfo.query.curPage=e,this.getList()},handleSizeChange:function(e){this.listInfo.query.pageSize=e,this.getList()}}}],components:{PageFilter:l,PageTable:o,PageForm:c},data:function(){return{listTypeInfo:[],filterList:[{type:"input",key:"关键字",value:"keyword"},{type:"select",key:"用户",value:"uderId"},{type:"date",key:"创建时间",value:"date"},{type:"button",key:"搜索",btType:"primary",icon:"el-icon-search"}]}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("page-filter",{attrs:{query:e.listInfo.query,filterList:e.filterList,listTypeInfo:e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.listInfo,"query",t)}}}),e._v(" "),n("page-table")],1)},staticRenderFns:[]};var g=n("C7Lr")(p,y,!1,function(e){n("as/J")},"data-v-1ceec6a9",null);t.default=g.exports},"as/J":function(e,t){}});
//# sourceMappingURL=0.4670212a1b4665043024.js.map