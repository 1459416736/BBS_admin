webpackJsonp([12],{"T+/8":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("z2X1"),a=o("wf1y");var n={data:function(){return{formInfo:{remember:!1,data:{account:"test",password:"123456"},rules:{}},buttonInfo:{btLoading:!1}}},watch:{"formInfo.remember":function(e){console.log(e)}},created:function(){this._initRemember()},methods:{_initRemember:function(e){var t=this.formInfo,o=t.data;!0===e?(localStorage.setItem("remember",t.remember),localStorage.setItem("account",o.account),localStorage.setItem("password",o.password)):!1===e&&(localStorage.setItem("remember",t.remember),localStorage.setItem("account",""),localStorage.setItem("password","")),"true"===localStorage.getItem("remember")?(t.remember=!0,o.account=localStorage.getItem("account"),o.password=localStorage.getItem("password")):(localStorage.removeItem("remember"),localStorage.removeItem("account"),localStorage.removeItem("password"))},_handleLogin:function(){var e=this;this.$refs.form.validate(function(t){var o;e.buttonInfo.btLoading=!0,(o=e.formInfo.data,Object(a.a)({url:"/api/user/login",method:"post",data:o})).then(function(t){t.success?(e._initRemember(e.formInfo.remember),Object(r.d)("token",t.token),e.$store.dispatch("user/setUserInfo",t.content.data).then(function(){e.$router.push("/")})):e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:3500}),e.buttonInfo.btLoading=!1}).catch(function(){e.buttonInfo.btLoading=!1})})}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"ground-glass"}),e._v(" "),o("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.formInfo.data,rules:e.formInfo.rules}},[o("div",{staticClass:"title"},[o("p",{staticClass:"name"},[e._v(e._s(e.$config.SYSTEMNAME))])]),e._v(" "),o("el-form-item",{attrs:{prop:"account"}},[o("el-input",{attrs:{type:"text","prefix-icon":"el-icon-people_fill",placeholder:"请输入账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._handleLogin()}},model:{value:e.formInfo.data.account,callback:function(t){e.$set(e.formInfo.data,"account","string"==typeof t?t.trim():t)},expression:"formInfo.data.account"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock_fill",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._handleLogin()}},model:{value:e.formInfo.data.password,callback:function(t){e.$set(e.formInfo.data,"password","string"==typeof t?t.trim():t)},expression:"formInfo.data.password"}})],1),e._v(" "),o("div",{staticClass:"remember"},[o("el-checkbox",{staticStyle:{color:"rgb(100, 100, 100)"},model:{value:e.formInfo.remember,callback:function(t){e.$set(e.formInfo,"remember",t)},expression:"formInfo.remember"}},[e._v("记住密码")])],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"login-bt",attrs:{loading:e.buttonInfo.btLoading,type:"primary"},on:{click:function(t){return e._handleLogin()}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var c=o("C7Lr")(n,s,!1,function(e){o("oK7a")},"data-v-44474374",null);t.default=c.exports},oK7a:function(e,t){}});
//# sourceMappingURL=12.99620e1bed9e69e5225b.js.map